# REST Api


## 权限设计
- 第一种
    - 用户表
    - 权限表
    - 用户权限表（角色表）
- 第二种
    - 用户表中有一个权限字段
    - 借鉴linux中的文件权限
        - 使用三个二进制代表八种值
        - r 100  读权限
        - w 010  写权限
        - x 001  执行权限
        - 权限存在八种结果 0-7
        - 5 101 r-x
            - 使用代码判断是否具有执行权限
            - & 
            - permission & 001     结果 00x
            - permission & 010     结果 0x0
        - 想判断是否具有某个权限
            - 使用权限和要判断的权限进行与运算
            - 如果结果为 0，无权限
            - 如果有权限值不为零， 值和你要判断的权限一致
        
        
        
### 数据交换
- a, b = b, a
- 引用临时变量
    - temp = a
    - a = b 
    - b = temp
- 不引入临时变量
    - a = a + b
    - b = a - b
    - a = a - b
- 不引入临时变量
    - ^ 
    - a = a ^ b
    - b = a ^ b
    - a = a ^ b
    - 举个大象
        - a = 2, b = 3
        - a 10  b 11
        - 异或，不同为一，相同为零
        - a = 01
        - b = 10
        - a = 11
        - a = 3, b = 2
        

### Token
- 生成机制
    - 在登录的时候
- 存在哪
    - 存哪都行
    - 如果想实现单终端登录，会存在数据库中一份，用户表中（常见）
    - 存在redis中，多终端登录
    
- 单终端思路
    - 每次登录生成一个新的token
    - 第一个用户登录之后，生成第一个token
    - 根据用户的token，找到用户，查它级联的数据
    - 第二个用户登录，生成新的token
    - 第二个token覆盖第一个token
    - 第一个登录的用户再来获取用户相关的信息
    - token查找不到用户

- 多终端登录
    - 每次登录依然生成token
    - token作为key存在cache中
    - 用户唯一标识 id，username 存储在 value 中
    
    
### 代码封装
- 针对于相同的，或者类似的过滤操作，我们可以进行一个封装
- 创建一个通用的父类
- 内部提供函数
- 后续调用函数


### 装饰器
- 本质上就是函数
- 简单实现
    - 传递的参数是 函数 fun
    - 返回的时候是返回内部重新定义的函数
- 坑点
    - 如果装饰的函数有参数
        - 需要在装饰器中的函数定义上指定参数
        - 需要转接参数
        - 使用 *args 转接所有的位置参数
        - 使用 **kwargs 转接所有的关键字参数
    - 如果装饰的函数有返回值
        - 在内部调用原函数的时候要继续向外进行返回
        
#### 简历上的技能点
- 四个左右的项目
- 项目描述 （2行左右搞定）
- 项目职责
    - 负责 xx 模块
    - 负责和产品对接需求（估期）
    - 负责和前端（移动端）对接接口（API接口定制）
    - 负责和测试对接，修复bug
- 项目技能点
    - 登录注册
    - 权限系统
    - 商品管理
    - 购物车
    - 订单
    - 地址
    - 积分管理
    - Celery
    - Email
    - Phone
    - Cache
    
    
#### 项目分析
- 首页
    - 电影列表展示
        - 热映
        - 即将上映
    - 票房排行
        - 数据展示
    - 热门影院
        - 影院的筛选
            - 筛选规则
            - 电影院卖出去的票钱
            - 票的张数
            - 观看场次
            - 用户评价
    - 电影显示日历
        - 即将上映
- 电影
    - 就是第一个页面的一部分
- 电影院
    - 数据级联筛选
    - 电影院.xxx.filter().filter()....filter().order_by()
- 选座
    - 排挡
    - 电影院把电影进行排挡
    - 选座
        - 前端校验
        - 后端最终生成订单
        - 锁单（倒计时）
- 订单
    - 订单倒计时
    - 惰性计时
    - 借用Redis
    - key-value
    - key 电影排挡
    - value [orderid, orderid]
    - 获取的时候根据order_id 查看订单状态，进行数据筛选
- 扫码
    - 根据订单号生成uuid
    - 二维码中存储uuid
- 用户系统


#### 项目
- 用户端
- 商家端
- 产品后台 